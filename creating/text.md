# Preparing the text

Localized text for your mod is provided to the game in specially formatted `.xls` spreadsheets, specified in your `mod.pkg.py` like this:
```py
contents = [
    "text-english.xls" / lang("english"),
    "text-francais.xls" / lang("francais"),
    # etc.
]
```

You should always include the English localization, which is always a fallback in case your mod is not translated to the language somebody is playing it in.

Inside the spreadsheet you should have one or more sheets containing localized strings. Each sheet should be named "Text - <something>" and have two columns:
* **ID** containing the identifier used to refer to the string
* **Text** containing the text of the string in a given language

The blank mod template already includes a correctly formatted spreadsheet of this kind, so you just need to fill it out.

## String identifiers for new stuff

Often, adding new objects to the game will require adding corresponding strings. For example, if you add a new structure with the ID 'gadget', the game will expect two strings called `structure.gadget` and `structure.gadget.desc`, to translate the structure's name and description respectively.

In general, the easiest way to figure out what strings you need to add is to just add your new thing to the game without the string, then play the mod. The missing strings will be displayed as eg. `(structure.gadget)` ingame, which gives you the ID of the string you need to include. In general, whenever you see an ID in parentheses inside the game, this means there is a missing string with that ID that you need to provide.

In other cases, the IDs of the necessary strings are controlled via scripts. This is described in its [own section](#strings-from-scripts) below.

## Special features

The text strings used in the spreadsheets support some additional features. You can include any or all of them in a single string, in the "Text" column of the spreadsheet.

### Placeholders

You can include placeholders in your text, which comes in handy if eg. some of the numbers in the text are dynamically generated by scripts. You can do it like this:

```
When you deliver {1} to the planet, its trade income increase by {2}%.
```

There is also some special support for automatically pluralizing strings:

```
Building this will take {1|unit:month}.
    turns into eg.: Building this will take 13 months.
{1|unit:year} remaining.
    turns into eg.: 1 year remaining.
```

Other available 'units' are: 'planet', 'slipway', 'tech', 'task'.

### Inline icons

To include a resource icon or other text icon, put it inside two colons like this:
```
:O: is the icon for ore ("O" is the ID of the resource).
:project: will show the text icon for 'project'.
```

### Formatting

To highlight parts of the text, put it inside asterisks:

```
Part of this text is *important*.
```

You can also use any of the [formatting tags supported by TextMeshPro](http://digitalnativestudios.com/textmeshpro/docs/rich-text/) - though be careful with those, since they let you do many things that can break the game's layout.

### Other extra features

There are some other extra "tags" that you put in double brackets that come in handy.

These will turn into a nicely formatted and colored string saying eg. "+3[science icon]" in yellow:
```
[[delta:+3S]] or [[delta:-2$]]
```

This type of tag turns into a name of the corresponding planet level, with a nice color and icon, eg. "[level icon] Successful" in gold:
```
[[ref:level.2]] 
```

These include the name of the thing you're referring to in text, and at the end of text, append a longer explanation of that thing:
```
[[ref:structure.relay]] or [[ref:project.megastructures]]
```

If you see the game doing something else that's not described here, you can usually find out how to do this by finding the corresponding string in the core localization files. These are stored wherever your game is installed, inside the `Data/localization` folder.

## Using localized strings from scripts :id=strings-from-scripts

To use localized strings from scripts, use the `LStr()` and `LPlainStr()` functions, providing the ID of the string and any arguments that should replace the placeholders. For example:

```py
LStr("resources.when_deliver_increase_output", ":O:", 25)
# assuming the contents of the string "resources.when_deliver.increase_output" are like this:
"When you deliver {1} to the planet, its trade income increases by {2}%."
# this will turn into:
"When you deliver :O: to the planet, its trade income increases by 25%." # :O: will display as the 'ore' icon
```

`LStr()` returns a special object called a LocalizedString. Most game engine methods and functions in Slipways either expect LocalizedStrings, or accept both LocalizedStrings and simple strings, so this is the function you should use in most cases.

`LPlainStr()` gives you a plain string. Use it when you want to work with the text some more before passing it on.

In the **core-files** repository, you will mostly see us use two other functions to access strings: `LS()` and `L()`. They are just like `LStr` and `LPlainStr` respectively, but accept an extra parameter for a "fallback" string when a string is not translated. These shouldn't be used anymore, but we're including an explanation here since you'll likely encounter them in example code.